<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Attendance Tracker</title>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4CAF50;
            --danger: #F44336;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --border: #dee2e6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
            padding: 0;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px 15px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .card h3 {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .card .value {
            font-size: 1.6rem;
            font-weight: bold;
            color: var(--primary);
        }

        .controls {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
            gap: 12px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .date-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .date-selector label {
            font-weight: 600;
            color: var(--gray);
            min-width: 90px;
        }

        .date-selector input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
        }

        .class-filter {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .class-filter label {
            font-weight: 600;
            color: var(--gray);
        }

        .class-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .class-btn {
            padding: 8px 12px;
            background-color: #e9ecef;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--gray);
        }

        .class-btn.active {
            background-color: var(--primary);
            color: white;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .action-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .whatsapp-btn {
            background-color: #25D366;
            color: white;
        }

        .reset-btn {
            background-color: #ff6b6b;
            color: white;
        }

        .action-buttons button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .attendance-table {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background-color: var(--primary);
            color: white;
        }

        th,
        td {
            padding: 12px 10px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            font-weight: 600;
            font-size: 0.9rem;
        }

        td {
            font-size: 0.95rem;
        }

        tbody tr:hover {
            background-color: rgba(67, 97, 238, 0.05);
        }

        .status-cell {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.toggle-slider {
            background-color: var(--success);
        }

        input:checked+.toggle-slider:before {
            transform: translateX(26px);
        }

        .present {
            color: var(--success);
            font-weight: bold;
        }

        .absent {
            color: var(--danger);
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
        }

        .present .status-indicator {
            background-color: var(--success);
        }

        .absent .status-indicator {
            background-color: var(--danger);
        }

        .loading {
            text-align: center;
            padding: 30px;
            font-size: 1.2rem;
            color: var(--primary);
        }

        .error {
            text-align: center;
            padding: 15px;
            background-color: #ffebee;
            color: #c62828;
            border-radius: 10px;
            margin-bottom: 15px;
            display: none;
        }

        .success {
            text-align: center;
            padding: 15px;
            background-color: #e8f5e9;
            color: #2e7d32;
            border-radius: 10px;
            margin-bottom: 15px;
            display: none;
        }

        footer {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            color: var(--gray);
            font-size: 0.85rem;
        }

        .icon {
            width: 18px;
            height: 18px;
            display: inline-block;
        }

        @media (min-width: 768px) {
            .container {
                max-width: 750px;
                padding: 20px;
            }

            .dashboard {
                grid-template-columns: repeat(4, 1fr);
                gap: 15px;
            }

            .controls {
                flex-direction: row;
                flex-wrap: wrap;
            }

            .date-selector,
            .class-filter {
                flex: 1;
                min-width: 100%;
            }

            .action-buttons {
                flex: 100%;
                margin-top: 10px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Pavitra Classes</h1>
            <p class="subtitle">Students Attendence Tracker</p>
        </header>

        <div class="dashboard">
            <div class="card">
                <h3>Total Students</h3>
                <div class="value" id="total-students">0</div>
            </div>
            <div class="card">
                <h3>Present Today</h3>
                <div class="value" id="present-count">0</div>
            </div>
            <div class="card">
                <h3>Absent Today</h3>
                <div class="value" id="absent-count">0</div>
            </div>
            <div class="card">
                <h3>Attendance Rate</h3>
                <div class="value" id="attendance-rate">0%</div>
            </div>
        </div>

        <div class="controls">
            <div class="date-selector">
                <label for="attendance-date">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path fill="currentColor"
                            d="M19,4H18V2H16V4H8V2H6V4H5C3.89,4 3,4.9 3,6V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V6A2,2 0 0,0 19,4M19,20H5V10H19V20M19,8H5V6H19M7,12H12V17H7V12Z" />
                    </svg>
                    Date:
                </label>
                <input type="date" id="attendance-date">
            </div>

            <div class="class-filter">
                <label>Filter by Class:</label>
                <div class="class-buttons" id="class-buttons">
                    <!-- Class buttons will be generated here -->
                </div>
            </div>

            <div class="action-buttons">
                <button class="whatsapp-btn" onclick="shareAbsentOnWhatsApp()">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path fill="currentColor"
                            d="M16.75,13.96C17,14.09 17.16,14.16 17.21,14.26C17.27,14.37 17.25,14.87 17,15.44C16.8,16 15.76,16.54 15.3,16.56C14.84,16.58 14.83,16.92 12.34,15.83C9.85,14.74 8.35,12.08 8.23,11.91C8.11,11.74 7.27,10.53 7.31,9.3C7.36,8.08 8,7.5 8.26,7.26C8.5,7 8.77,6.97 8.94,7H9.41C9.56,7 9.77,6.94 9.96,7.45L10.65,9.32C10.71,9.45 10.75,9.6 10.66,9.76L10.39,10.17L10,10.59C9.88,10.71 9.74,10.84 9.88,11.09C10,11.35 10.5,12.18 11.2,12.87C12.11,13.75 12.91,14.04 13.15,14.17C13.39,14.31 13.54,14.29 13.69,14.13L14.5,13.19C14.69,12.94 14.85,13 15.08,13.08L16.75,13.96M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C10.03,22 8.2,21.43 6.65,20.45L2,22L3.55,17.35C2.57,15.8 2,13.97 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.72 4.54,15.31 5.46,16.61L4.5,19.5L7.39,18.54C8.69,19.46 10.28,20 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z" />
                    </svg>
                    Share Absent on WhatsApp
                </button>
                <button class="reset-btn" onclick="resetAttendance()">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path fill="currentColor"
                            d="M12,18A6,6 0 0,1 6,12C6,11 6.25,10.03 6.7,9.2L5.24,7.74C4.46,8.97 4,10.43 4,12A8,8 0 0,0 12,20V23L16,19L12,15M12,4V1L8,5L12,9V6A6,6 0 0,1 18,12C18,13 17.75,13.97 17.3,14.8L18.76,16.26C19.54,15.03 20,13.57 20,12A8,8 0 0,0 12,4Z" />
                    </svg>
                    Reset Today
                </button>
            </div>
        </div>

        <div class="success" id="success-message">
            <svg class="icon" viewBox="0 0 24 24">
                <path fill="currentColor"
                    d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z" />
            </svg>
            Attendance recorded successfully!
        </div>

        <div class="error" id="error-message">
            <svg class="icon" viewBox="0 0 24 24">
                <path fill="currentColor"
                    d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
            </svg>
            Error loading data.
        </div>

        <div class="attendance-table">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="student-list">
                    <!-- Student data will be populated here -->
                </tbody>
            </table>
        </div>

        <div class="loading" id="loading-message">
            <svg class="icon" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z" />
            </svg>
            Loading student data...
        </div>

        <footer>
            <p>yashk.in &copy; 2025 | Data stored in browser</p>
        </footer>
    </div>

    <script>
        // Student data
        const studentData = [
            { id: 1, name: 'Siddhi Suryavanshi', class: '11' },
            { id: 2, name: 'Rutvija Suryavanshi', class: '8' },
            { id: 3, name: 'Khanak Picha', class: '9' },
            { id: 4, name: 'Vishaka Dawre', class: '9' },
            { id: 5, name: 'Nishika Lunawat', class: '9' },
            { id: 6, name: 'Pradyna Raka', class: '9' },
            { id: 7, name: 'Yavhi Bagmar', class: '9' },
            { id: 8, name: 'Soham Kadu', class: '9' },
            { id: 9, name: 'Dhruv Sharma', class: '9' },
            { id: 10, name: 'Parth Satpute', class: '9' },
            { id: 11, name: 'Vedant Musale', class: '9' },
            { id: 12, name: 'Rishika Baberwal', class: '9' },
            { id: 13, name: 'Shivam Shinde', class: '9' },
            { id: 14, name: 'Nikhil Patil', class: '9' },
            { id: 15, name: 'Arnav Dharankar', class: '9' },
            { id: 16, name: 'Tanish Rupawate', class: '9' },
            { id: 17, name: 'Ayush Picha', class: '7' },
            { id: 18, name: 'Sarang Bhagat', class: '7' },
            { id: 19, name: 'Hardik Tated', class: '7' },
            { id: 20, name: 'Hridhan Bedmutha', class: '7' },
            { id: 21, name: 'Veer Shah', class: '10' },
            { id: 22, name: 'Mayuresh Shahane', class: '10' },
            { id: 23, name: 'Sarthak Shirsagar', class: '10' },
            { id: 24, name: 'Bhageshree Das', class: '10' },
            { id: 25, name: 'Chaitanya Bhagwat', class: '10' },
            { id: 26, name: 'Uthitha Samdariya', class: '10' },
            { id: 27, name: 'Partik Bare', class: '10' },
            { id: 28, name: 'Shivraj Bhosle', class: '10' },
            { id: 29, name: 'Labdhi Nahata', class: '8' },
            { id: 30, name: 'Manasvi Surana', class: '8' },
            { id: 31, name: 'Devang Bedmutha', class: '8' },
            { id: 32, name: 'Shurya Shinde', class: '8' },
            { id: 33, name: 'Kaustubh Nikumbh', class: '8' },
            { id: 34, name: 'Sarang Jadhav', class: '8' },
            { id: 35, name: 'Aditya Khatale', class: '8' },
            { id: 36, name: 'Harshit Picha', class: '8' },
            { id: 37, name: 'Chaturthi Parakh', class: '8' }
        ];

        // State
        let students = [];
        let attendance = {};
        let selectedDate = new Date().toISOString().split('T')[0];
        let selectedClass = 'all';

        // DOM Elements
        const studentList = document.getElementById('student-list');
        const loadingMessage = document.getElementById('loading-message');
        const errorMessage = document.getElementById('error-message');
        const successMessage = document.getElementById('success-message');
        const classButtons = document.getElementById('class-buttons');
        const attendanceDate = document.getElementById('attendance-date');
        const totalStudentsEl = document.getElementById('total-students');
        const presentCountEl = document.getElementById('present-count');
        const absentCountEl = document.getElementById('absent-count');
        const attendanceRateEl = document.getElementById('attendance-rate');

        // Initialize the app
        function init() {
            // Set today's date as default
            attendanceDate.value = selectedDate;

            // Add event listeners
            attendanceDate.addEventListener('change', handleDateChange);

            // Load student data
            loadStudentData();
        }

        // Handle date change
        function handleDateChange(e) {
            selectedDate = e.target.value;
            loadAttendanceData();
            renderStudentList();
            updateStats();
        }

        // Load student data
        function loadStudentData() {
            try {
                students = studentData;

                // Populate class buttons
                populateClassButtons();

                // Load attendance data
                loadAttendanceData();

                // Render student list
                renderStudentList();

                // Update stats
                updateStats();

                // Hide loading message
                loadingMessage.style.display = 'none';

            } catch (error) {
                console.error('Error loading student data:', error);
                loadingMessage.style.display = 'none';
                errorMessage.style.display = 'block';
            }
        }

        // Load attendance data from localStorage
        function loadAttendanceData() {
            // Load from localStorage if available
            const savedAttendance = localStorage.getItem('attendanceData');
            if (savedAttendance) {
                attendance = JSON.parse(savedAttendance);
            }

            // Initialize attendance for the selected date if not exists
            if (!attendance[selectedDate]) {
                attendance[selectedDate] = {};

                // Initialize all as absent
                students.forEach(student => {
                    attendance[selectedDate][student.id] = false;
                });

                // Save to localStorage
                saveAttendanceData();
            }
        }

        // Save attendance data to localStorage
        function saveAttendanceData() {
            localStorage.setItem('attendanceData', JSON.stringify(attendance));
        }

        // Populate class buttons
        function populateClassButtons() {
            const classes = [...new Set(students.map(student => student.class))];
            classes.sort((a, b) => a - b); // Sort numerically

            // Add "All" button
            const allButton = document.createElement('button');
            allButton.className = 'class-btn active';
            allButton.textContent = 'All';
            allButton.setAttribute('data-class', 'all');
            allButton.addEventListener('click', () => filterByClass('all'));
            classButtons.appendChild(allButton);

            // Add class buttons
            classes.forEach(className => {
                const button = document.createElement('button');
                button.className = 'class-btn';
                button.textContent = `Class ${className}`;
                button.setAttribute('data-class', className);
                button.addEventListener('click', () => filterByClass(className));
                classButtons.appendChild(button);
            });
        }

        // Filter by class
        function filterByClass(className) {
            selectedClass = className;

            // Update active button
            document.querySelectorAll('.class-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.class-btn[data-class="${className}"]`).classList.add('active');

            // Render student list
            renderStudentList();
        }

        // Render student list based on filters
        function renderStudentList() {
            // Filter students
            const filteredStudents = students.filter(student => {
                return selectedClass === 'all' || student.class === selectedClass;
            });

            // Clear current list
            studentList.innerHTML = '';

            if (filteredStudents.length === 0) {
                studentList.innerHTML = '<tr><td colspan="3" style="text-align: center; padding: 20px;">No students found</td></tr>';
                return;
            }

            // Render filtered students
            filteredStudents.forEach(student => {
                const isPresent = attendance[selectedDate] && attendance[selectedDate][student.id];

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.class}th ${student.name}</td>
                    <td class="status-cell">
                        <label class="toggle-switch">
                            <input type="checkbox" ${isPresent ? 'checked' : ''} onchange="toggleAttendance(${student.id}, this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </td>
                `;

                studentList.appendChild(row);
            });

            // Update stats
            updateStats();
        }

        // Toggle attendance status
        function toggleAttendance(studentId, isPresent) {
            if (!attendance[selectedDate]) {
                attendance[selectedDate] = {};
            }

            attendance[selectedDate][studentId] = isPresent;

            // Save to localStorage
            saveAttendanceData();

            // Show success message
            successMessage.style.display = 'block';
            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 2000);

            // Re-render the list
            renderStudentList();
        }

        // Reset today's attendance
        function resetAttendance() {
            if (confirm('Are you sure you want to reset today\'s attendance? All students will be marked as absent.')) {
                if (attendance[selectedDate]) {
                    // Set all students to absent for today
                    Object.keys(attendance[selectedDate]).forEach(studentId => {
                        attendance[selectedDate][studentId] = false;
                    });

                    // Save to localStorage
                    saveAttendanceData();

                    // Re-render the list
                    renderStudentList();

                    // Show message
                    successMessage.textContent = 'Today\'s attendance has been reset';
                    successMessage.style.display = 'block';
                    setTimeout(() => {
                        successMessage.style.display = 'none';
                    }, 2000);
                }
            }
        }

        // Share absent students on WhatsApp
        function shareAbsentOnWhatsApp() {
            const absentStudents = students.filter(student =>
                !attendance[selectedDate] || !attendance[selectedDate][student.id]
            );

            if (absentStudents.length === 0) {
                alert('No absent students today!');
                return;
            }

            const date = new Date(selectedDate).toLocaleDateString();
            let message = `Absent Students for ${date}:\n\n`;

            absentStudents.forEach((student, index) => {
                message += `${index + 1}. ${student.name} - ${student.class}th\n`;
            });

            // Encode the message for WhatsApp URL
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;

            // Open WhatsApp in a new tab
            window.open(whatsappUrl, '_blank');
        }

        // Update statistics
        function updateStats() {
            const totalStudents = students.length;
            const presentCount = attendance[selectedDate] ?
                Object.values(attendance[selectedDate]).filter(status => status).length : 0;
            const absentCount = totalStudents - presentCount;
            const attendanceRate = totalStudents > 0 ?
                Math.round((presentCount / totalStudents) * 100) : 0;

            totalStudentsEl.textContent = totalStudents;
            presentCountEl.textContent = presentCount;
            absentCountEl.textContent = absentCount;
            attendanceRateEl.textContent = `${attendanceRate}%`;
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
